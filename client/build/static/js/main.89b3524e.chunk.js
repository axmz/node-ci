(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{130:function(e,t,n){e.exports=n(243)},243:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"fetchUser",(function(){return w})),n.d(a,"handleToken",(function(){return x})),n.d(a,"submitBlog",(function(){return B})),n.d(a,"fetchBlogs",(function(){return N})),n.d(a,"fetchBlog",(function(){return C}));n(131);var r=n(0),c=n.n(r),l=n(120),o=n.n(l),i=n(8),u=n(5),s=n(123),m=n(10),p=n(11),f=n(14),h=n(12),b=n(249),d=n(252),v=n(246),g=n(33),y=n(20),E=n.n(y),O=n(48),j=n(23),k=n.n(j),w=function(){return function(){var e=Object(O.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("/api/current_user");case 2:n=e.sent,t({type:"fetch_user",payload:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(O.a)(E.a.mark((function t(n){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.post("/api/stripe",e);case 2:a=t.sent,n({type:"fetch_user",payload:a.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},B=function(e,t,n){return function(){var a=Object(O.a)(E.a.mark((function a(r){var c,l;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,k.a.get("/api/upload");case 2:if(c=a.sent,!t){a.next=7;break}return a.next=6,k.a.put(c.data.url,t,{headers:{"Content-Type":t.type}});case 6:a.sent;case 7:return a.next=9,k.a.post("/api/blogs",Object(g.a)(Object(g.a)({},e),{},{imageUrl:c.data.key}));case 9:l=a.sent,n.push("/blogs"),r({type:"fetch_blog",payload:l.data});case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},N=function(){return function(){var e=Object(O.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("/api/blogs");case 2:n=e.sent,t({type:"fetch_blogs",payload:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(e){return function(){var t=Object(O.a)(E.a.mark((function t(n){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.get("/api/blogs/".concat(e));case 2:a=t.sent,n({type:"fetch_blog",payload:a.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=n(245),F=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"renderContent",value:function(){switch(this.props.auth){case null:return;case!1:return c.a.createElement("li",null,c.a.createElement("a",{href:"/auth/google"},"Login With Google"));default:return[c.a.createElement("li",{key:"3",style:{margin:"0 10px"}},c.a.createElement(_.a,{to:"/blogs"},"My Blogs")),c.a.createElement("li",{key:"2"},c.a.createElement("a",{href:"/auth/logout"},"Logout"))]}}},{key:"render",value:function(){return c.a.createElement("nav",{className:"indigo"},c.a.createElement("div",{className:"nav-wrapper"},c.a.createElement(_.a,{to:this.props.auth?"/blogs":"/",className:"left brand-logo",style:{marginLeft:"10px"}},"Blogster"),c.a.createElement("ul",{className:"right"},this.renderContent())))}}]),n}(r.Component);var S=Object(i.b)((function(e){return{auth:e.auth}}))(F),U=function(){return c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement("h1",null,"Blogster!"),"Write private blogs")},A=n(124),R=n.n(A),D=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchBlogs()}},{key:"renderBlogs",value:function(){return R()(this.props.blogs,(function(e){return c.a.createElement("div",{className:"card darken-1 horizontal",key:e._id},c.a.createElement("div",{className:"card-stacked"},c.a.createElement("div",{className:"card-content"},c.a.createElement("span",{className:"card-title"},e.title),c.a.createElement("p",null,e.content)),c.a.createElement("div",{className:"card-action"},c.a.createElement(_.a,{to:"/blogs/".concat(e._id)},"Read"))))}))}},{key:"render",value:function(){return c.a.createElement("div",null,this.renderBlogs())}}]),n}(r.Component);var M=Object(i.b)((function(e){return{blogs:e.blogs}}),{fetchBlogs:N})(D),I=function(){return c.a.createElement("div",null,c.a.createElement(M,null),c.a.createElement("div",{className:"fixed-action-btn"},c.a.createElement(_.a,{to:"/blogs/new",className:"btn-floating btn-large red"},c.a.createElement("i",{className:"material-icons"},"add"))))},L=n(247),T=n(53),V=n.n(T),z=n(248),J=function(e){var t=e.input,n=e.label,a=e.meta,r=a.error,l=a.touched;return c.a.createElement("div",{className:t.name},c.a.createElement("label",null,n),c.a.createElement("input",Object.assign({},t,{style:{marginBottom:"5px"}})),c.a.createElement("div",{className:"red-text",style:{marginBottom:"20px"}},l&&r))},W=[{label:"Blog Title",name:"title"},{label:"Content",name:"content"}],q=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"renderFields",value:function(){return V.a.map(W,(function(e){var t=e.label,n=e.name;return c.a.createElement(z.a,{key:n,component:J,type:"text",label:t,name:n})}))}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:this.props.handleSubmit(this.props.onBlogSubmit)},this.renderFields(),c.a.createElement(_.a,{to:"/blogs",className:"red btn-flat white-text"},"Cancel"),c.a.createElement("button",{type:"submit",className:"teal btn-flat right white-text"},"Next",c.a.createElement("i",{className:"material-icons right"},"done"))))}}]),n}(r.Component);var G=Object(L.a)({validate:function(e){var t={};return V.a.each(W,(function(n){var a=n.name;e[a]||(t[a]="You must provide a value")})),t},form:"blogForm",destroyOnUnmount:!1})(q),P=n(251),Y=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={file:null},e}return Object(p.a)(n,[{key:"renderFields",value:function(){var e=this.props.formValues;return V.a.map(W,(function(t){var n=t.name,a=t.label;return c.a.createElement("div",{key:n},c.a.createElement("label",null,a),c.a.createElement("div",null,e[n]))}))}},{key:"renderButtons",value:function(){var e=this.props.onCancel;return c.a.createElement("div",null,c.a.createElement("button",{className:"yellow darken-3 white-text btn-flat",onClick:e},"Back"),c.a.createElement("button",{className:"green btn-flat right white-text"},"Save Blog",c.a.createElement("i",{className:"material-icons right"},"email")))}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.props,n=t.submitBlog,a=t.history;n(t.formValues,this.state.file,a)}},{key:"onFileChange",value:function(e){this.setState({file:e.target.files[0]})}},{key:"render",value:function(){return c.a.createElement("form",{onSubmit:this.onSubmit.bind(this)},c.a.createElement("h5",null,"Please confirm your entries"),this.renderFields(),c.a.createElement("h5",null,"Add An Image"),c.a.createElement("input",{onChange:this.onFileChange.bind(this),type:"file",accept:"image/*"}),this.renderButtons())}}]),n}(r.Component);var H=Object(i.b)((function(e){return{formValues:e.form.blogForm.values}}),a)(Object(P.a)(Y)),K=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showFormReview:!1},e}return Object(p.a)(n,[{key:"renderContent",value:function(){var e=this;return this.state.showFormReview?c.a.createElement(H,{onCancel:function(){return e.setState({showFormReview:!1})}}):c.a.createElement(G,{onBlogSubmit:function(){return e.setState({showFormReview:!0})}})}},{key:"render",value:function(){return c.a.createElement("div",null,this.renderContent())}}]),n}(r.Component),Q=Object(L.a)({form:"blogForm"})(K),X=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchBlog(this.props.match.params._id)}},{key:"renderImage",value:function(){if(this.props.blog.imageUrl)return c.a.createElement("img",{src:"https://s3-us-west-2.amazonaws.com/my-blog-bucket-123/"+this.props.blog.imageUrl,alt:"image"})}},{key:"render",value:function(){if(!this.props.blog)return"";var e=this.props.blog,t=e.title,n=e.content;return c.a.createElement("div",null,c.a.createElement("h3",null,t),c.a.createElement("p",null,n),this.renderImage())}}]),n}(r.Component);var Z=Object(i.b)((function(e,t){return{blog:e.blogs[t.match.params._id]}}),{fetchBlog:C})(X),$=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchUser()}},{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement(b.a,null,c.a.createElement("div",null,c.a.createElement(S,null),c.a.createElement(d.a,null,c.a.createElement(v.a,{path:"/blogs/new",component:Q}),c.a.createElement(v.a,{exact:!0,path:"/blogs/:_id",component:Z}),c.a.createElement(v.a,{path:"/blogs",component:I}),c.a.createElement(v.a,{path:"/",component:U})))))}}]),n}(r.Component),ee=Object(i.b)(null,a)($),te=n(250),ne=n(63),ae=n(129),re=n.n(ae),ce=Object(u.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_user":return t.payload||!1;default:return e}},form:te.a,blogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_blog":var n=t.payload;return Object(g.a)(Object(g.a)({},e),{},Object(ne.a)({},n._id,n));case"fetch_blogs":return Object(g.a)(Object(g.a)({},e),re()(t.payload,"_id"));default:return e}}});window.axios=k.a;var le=Object(u.d)(ce,{},Object(u.a)(s.a));o.a.render(c.a.createElement(i.a,{store:le},c.a.createElement(ee,null)),document.querySelector("#root"))}},[[130,1,2]]]);
//# sourceMappingURL=main.89b3524e.chunk.js.map